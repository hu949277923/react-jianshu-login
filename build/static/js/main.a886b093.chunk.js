(this["webpackJsonpreact-jianshu-login"]=this["webpackJsonpreact-jianshu-login"]||[]).push([[0],{301:function(e,r,t){"use strict";t.r(r);var c=t(1),s=t(59),a=t.n(s),n=t(331),i=t(326),o=t(5),l=t(321),j=t(329),d=t(323),b=t(324),u=t(325),h=t(333),x=t(53),O=t(25),m=t(64),p=t.n(m),w=t(85),f=t(30),v=t(328),g=t(75),S=t(316),C=t(317),y=t(335),I=t(318),k=t(332),q=t(330),z=t(45),_=t(91),R=t.n(_),J=t(100),L=t(4),V=R.a.create({});var A=function(){var e={email:window.localStorage.getItem("email")||"hu949277923@163.com",password:window.localStorage.getItem("password")||"test123456",isSave:!0},r=Object(v.a)(),t=function(){var e=Object(w.a)(p.a.mark((function e(t,c){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),t.isSave&&(window.localStorage.setItem("email",t.email),window.localStorage.setItem("password",t.password)),e.next=4,V.post("/api/users/login",{user:t}).catch((function(){r({title:"\u7528\u6237\u767b\u5f55",description:"\u7528\u6237\u767b\u5f55\u5931\u8d25",status:"error",duration:9e3,isClosable:!0})}));case 4:s=e.sent,"user"in s.data&&r({title:"\u7528\u6237\u767b\u5f55",description:"\u7528\u6237\u767b\u5f55\u6210\u529f",status:"success",duration:9e3,isClosable:!0});case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),c=z.a({email:z.b().email().required("\u8bf7\u8f93\u5165\u90ae\u7bb1"),password:z.b().min(6,"\u5bc6\u7801\u6700\u4f4e\u4e3a\u516d\u4f4d\u6570")});return Object(L.jsx)(f.c,{initialValues:e,onSubmit:t,validationSchema:c,children:function(e){return Object(L.jsxs)(f.b,{children:[Object(L.jsxs)(h.b,{children:[Object(L.jsx)(f.a,{name:"email",children:function(e){var r=e.field,t=e.form;return Object(L.jsxs)(g.a,{isInvalid:t.errors.email&&t.touched.email,children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(x.d,{})}),Object(L.jsx)(y.a,Object(O.a)(Object(O.a)({},r),{},{id:"email",placeholder:"\u90ae\u7bb1"}))]}),Object(L.jsx)(I.a,{children:t.errors.email})]})}}),Object(L.jsx)(f.a,{name:"password",children:function(e){var r=e.field,t=e.form;return Object(L.jsxs)(g.a,{isInvalid:t.errors.password&&t.touched.password,children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(J.a,{})}),Object(L.jsx)(y.a,Object(O.a)(Object(O.a)({},r),{},{id:"password",type:"password",placeholder:"\u8bbe\u7f6e\u5bc6\u7801"}))]}),Object(L.jsx)(I.a,{children:t.errors.password})]})}}),Object(L.jsx)(f.a,{name:"isSave",children:function(e){var r=e.field;e.form;return Object(L.jsx)(k.a,Object(O.a)(Object(O.a)({},r),{},{defaultIsChecked:!0,children:"\u8bb0\u4f4f\u6211"}))}})]}),Object(L.jsx)(q.a,{w:"sm",mt:4,bgColor:"blue.400",colorScheme:"teal",borderRadius:"full",isLoading:e.isSubmitting,type:"submit",_hover:{bgColor:"blue.500"},children:"\u767b\u5f55"})]})}})},B=t(322),E=t(163),F=R.a.create({});var Y=function(){var e=Object(v.a)(),r=function(){var r=Object(w.a)(p.a.mark((function r(t,c){var s;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(t),r.next=3,F.post("/api/users",{user:t}).catch((function(){e({title:"\u7528\u6237\u6ce8\u518c",description:"\u7528\u6237\u6ce8\u518c\u5931\u8d25",status:"error",duration:9e3,isClosable:!0})}));case 3:s=r.sent,"user"in s.data&&e({title:"\u7528\u6237\u6ce8\u518c",description:"\u7528\u6237\u6ce8\u518c\u6210\u529f",status:"success",duration:9e3,isClosable:!0});case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),t=z.a({username:z.b().max(15,"\u7528\u6237\u6635\u79f0\u4e0d\u80fd\u5927\u4e8e15").required("\u8bf7\u8f93\u5165\u7528\u6237\u540d"),email:z.b().email().required("\u8bf7\u8f93\u5165\u90ae\u7bb1"),password:z.b().min(6,"\u5bc6\u7801\u6700\u4f4e\u4e3a\u516d\u4f4d\u6570")});return Object(L.jsx)(f.c,{initialValues:{username:"bill",email:"hu949277923@163.com",password:"test123456"},onSubmit:r,validationSchema:t,children:function(e){return Object(L.jsxs)(f.b,{children:[Object(L.jsxs)(h.b,{children:[Object(L.jsx)(f.a,{name:"username",children:function(e){var r=e.field,t=e.form;return Object(L.jsxs)(g.a,{isInvalid:t.errors.username&&t.touched.username,children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(E.a,{})}),Object(L.jsx)(y.a,Object(O.a)(Object(O.a)({},r),{},{id:"username",placeholder:"\u60a8\u7684\u6635\u79f0"}))]}),Object(L.jsx)(I.a,{children:t.errors.username})]})}}),Object(L.jsx)(f.a,{name:"email",children:function(e){var r=e.field,t=e.form;return Object(L.jsxs)(g.a,{isInvalid:t.errors.email&&t.touched.email,children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(x.d,{})}),Object(L.jsx)(y.a,Object(O.a)(Object(O.a)({},r),{},{id:"email",placeholder:"\u90ae\u7bb1"}))]}),Object(L.jsx)(I.a,{children:t.errors.email})]})}}),Object(L.jsx)(f.a,{name:"password",children:function(e){var r=e.field,t=e.form;return Object(L.jsxs)(g.a,{isInvalid:t.errors.password&&t.touched.password,children:[Object(L.jsxs)(S.a,{children:[Object(L.jsx)(C.a,{children:Object(L.jsx)(J.a,{})}),Object(L.jsx)(y.a,Object(O.a)(Object(O.a)({},r),{},{id:"password",type:"password",placeholder:"\u8bbe\u7f6e\u5bc6\u7801"}))]}),Object(L.jsx)(I.a,{children:t.errors.password})]})}})]}),Object(L.jsx)(q.a,{w:"sm",mt:4,bgColor:"green.400",colorScheme:"teal",borderRadius:"full",isLoading:e.isSubmitting,type:"submit",_hover:{bgColor:"green.500"},children:"\u6ce8\u518c"}),Object(L.jsxs)(l.a,{my:"2",mx:"auto",w:"50%",fontSize:"12",colorScheme:"blue",children:["\u70b9\u51fb\u6ce8\u518c\u5373\u8868\u793a\u60a8\u7edf\u4e00\u5e76\u613f\u610f\u9075\u5faa\u7b80\u4e66",Object(L.jsx)(B.a,{color:"blue.400",children:"\u7528\u6237\u534f\u8bae"}),"\u548c",Object(L.jsx)(B.a,{color:"blue.400",children:"\u9690\u79c1\u653f\u7b56"})]})]})}})};var D=function(){var e=Object(c.useState)(0),r=Object(o.a)(e,2),t=r[0],s=r[1];return Object(L.jsx)(l.a,{w:"100vw",h:"100vh",textAlign:"center",bgColor:"gray.100",children:Object(L.jsx)(l.a,{w:"480px",h:"100vh",mx:"auto",children:Object(L.jsx)(l.a,{p:6,bgColor:"white",mx:"auto",borderRadius:"lg",boxShadow:"lg",transform:"translateY(10vh)",children:Object(L.jsxs)(j.e,{isFitted:!0,variant:"line",colorScheme:"red",children:[Object(L.jsxs)(j.b,{mx:"auto",w:"60%",children:[Object(L.jsx)(j.a,{_focus:{boxShadow:"none"},onClick:function(){return s(0)},children:"\u767b\u5f55"}),Object(L.jsx)(j.a,{_focus:{boxShadow:"none"},onClick:function(){return s(1)},children:"\u6ce8\u518c"})]}),Object(L.jsxs)(j.d,{children:[Object(L.jsx)(j.c,{children:Object(L.jsx)(A,{})}),Object(L.jsx)(j.c,{children:Object(L.jsx)(Y,{})})]}),Object(L.jsxs)(d.a,{mx:"auto",w:"80%",alignItems:"center",color:"gray.400",children:[Object(L.jsx)(l.a,{flex:"1",children:Object(L.jsx)(b.a,{})}),Object(L.jsx)(l.a,{flex:"1",children:Object(L.jsxs)(u.a,{fontSize:"12px",children:["\u793e\u4ea4\u8d26\u53f7",0===t?"\u767b\u5f55":"\u76f4\u63a5\u6ce8\u518c"]})}),Object(L.jsx)(l.a,{flex:"1",children:Object(L.jsx)(b.a,{})})]}),Object(L.jsxs)(h.a,{py:4,mx:"auto",justify:"center",spacing:8,children:[0===t?Object(L.jsx)(l.a,{children:Object(L.jsx)(x.c,{color:"#e05244",size:"30"})}):"",Object(L.jsx)(l.a,{children:Object(L.jsx)(x.b,{onClick:function(){window.location.href="https://www.jianshu.com/users/auth/wechat"},color:"#00bb29",size:"30"})}),Object(L.jsx)(l.a,{children:Object(L.jsx)(x.a,{onClick:function(){window.location.href="https://www.jianshu.com/users/auth/qq_connect"},color:"#498ad5",size:"30"})})]})]})})})})};a.a.render(Object(L.jsxs)(n.a,{children:[Object(L.jsx)(i.a,{}),Object(L.jsx)(D,{})]}),document.getElementById("root"))}},[[301,1,2]]]);
//# sourceMappingURL=main.a886b093.chunk.js.map